<!DOCTYPE html>
<html lang="zh-SG">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P5 é«˜çº§åæ–‡ï¼šFEAST å†™ä½œç¥å™¨</title>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Babel ç”¨äºç¼–è¯‘ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- å®šä¹‰å¼•ç”¨åœ°å›¾ (Import Map) -->
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.263.1"
      }
    }
    </script>

    <style>
        /* ç¿»è½¬å¡ç‰‡æ•ˆæœ */
        .perspective-1000 { perspective: 1000px; }
        .preserve-3d { transform-style: preserve-3d; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .-rotate-y-180 { transform: rotateY(-180deg); }
        .backface-hidden { backface-visibility: hidden; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn { animation: fadeIn 0.5s ease-out forwards; }
    </style>
</head>
<body class="bg-indigo-50">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            BookOpen, Frown, Smile, Heart, Star, ArrowRight, ArrowLeft, 
            Lightbulb, Zap, CheckCircle, Volume2, Award, Sparkles, RotateCw 
        } from 'lucide-react';

        const App = () => {
          const [currentSlide, setCurrentSlide] = useState(0);
          const [showConfetti, setShowConfetti] = useState(false);
          
          // Slide 3: Playground Conflict State
          const [playgroundSelections, setPlaygroundSelections] = useState({
            feeling: '', expression: '', action: '', thought: ''
          });
          
          // Slide 4: The Solution Idea State
          const [solutionSelections, setSolutionSelections] = useState({
            idiom: '', action: '', speech: ''
          });

          const [generatedPlayground, setGeneratedPlayground] = useState('');
          const [generatedSolution, setGeneratedSolution] = useState('');

          // è¯­éŸ³åˆæˆå‡½æ•°
          const speak = (text) => {
            if ('speechSynthesis' in window) {
              const utterance = new SpeechSynthesisUtterance(text);
              utterance.lang = 'zh-CN'; // è®¾ç½®è¯­è¨€ä¸ºä¸­æ–‡
              utterance.rate = 0.9; // è¯­é€Ÿç¨æ…¢ï¼Œé€‚åˆæ•™å­¦
              window.speechSynthesis.cancel(); // åœæ­¢ä¹‹å‰çš„æœ—è¯»
              window.speechSynthesis.speak(utterance);
            }
          };

          // Flashcard Component
          const Flashcard = ({ wordData }) => {
            const [isFlipped, setIsFlipped] = useState(false);

            const handleFlip = () => {
              if (!isFlipped) {
                speak(wordData.w); // åªæœ‰ç¿»åˆ°èƒŒé¢æ—¶æ‰è¯»
              }
              setIsFlipped(!isFlipped);
            };

            return (
              <div 
                onClick={handleFlip}
                className={`relative h-48 w-full cursor-pointer perspective-1000 group transition-all duration-300 transform hover:scale-105`}
              >
                <div className={`absolute w-full h-full transition-all duration-500 preserve-3d rounded-xl shadow-md border-2 ${isFlipped ? 'opacity-0 rotate-y-180 pointer-events-none' : 'opacity-100 rotate-y-0'} ${wordData.color} bg-white flex flex-col items-center justify-center p-4 backface-hidden`}>
                  {/* Front Side */}
                  <div className="text-2xl font-bold text-gray-800 mb-2">{wordData.w}</div>
                  <div className="text-gray-500 font-serif text-lg">{wordData.p}</div>
                  <div className="absolute bottom-3 right-3 text-gray-400">
                    <RotateCw className="w-5 h-5" />
                  </div>
                </div>

                <div className={`absolute w-full h-full transition-all duration-500 preserve-3d rounded-xl shadow-md border-2 ${!isFlipped ? 'opacity-0 -rotate-y-180 pointer-events-none' : 'opacity-100 rotate-y-0'} bg-white flex flex-col items-center justify-center p-4 text-center overflow-y-auto backface-hidden`}>
                  {/* Back Side */}
                  <div className="flex items-center gap-2 mb-2">
                    <Volume2 className="w-4 h-4 text-indigo-500" />
                    <span className="font-bold text-indigo-600 text-lg">{wordData.w}</span>
                  </div>
                  <div className="text-sm text-gray-600 mb-1 font-bold">{wordData.mean_cn}</div>
                  <div className="text-xs text-gray-400 italic mb-2">{wordData.mean_en}</div>
                  <div className="bg-gray-100 p-2 rounded w-full">
                    <div className="text-xs text-gray-500 font-bold mb-1">åº”ç”¨åœºåˆ:</div>
                    <div className="text-xs text-gray-700">{wordData.usage}</div>
                  </div>
                </div>
              </div>
            );
          };

          // Data for Slide 3: Playground FEAST Options
          const playgroundOptions = {
            feeling: ['å¿ƒæ€¥å¦‚ç„š', 'ç„¦æ€¥ä¸‡åˆ†', 'åç«‹ä¸å®‰', 'åƒçƒ­é”…ä¸Šçš„èš‚èš'],
            expression: ['çœ‰å¤´ç´§é”', 'æ»¡å¤´å¤§æ±—', 'è„¸è‰²å‡é‡', 'æ€¥å¾—ç›´è·ºè„š'],
            action: ['ä¸åœåœ°çœ‹æ‰‹è¡¨', 'åœ¨æ»‘æ¢¯æ—æ¥å›è¸±æ­¥', 'æ— å¥ˆåœ°å¹äº†ä¸€å£æ°”', 'ä¼¸é•¿è„–å­å¼ æœ›'],
            thought: ['å¦ˆå¦ˆç—…å¾—é‚£ä¹ˆé‡ï¼Œæ²¡äººç…§é¡¾æ€ä¹ˆåŠï¼Ÿ', 'å†ä¸å›å®¶ï¼Œå¦ˆå¦ˆè¯¥æ‹…å¿ƒäº†ï¼', 'å¦¹å¦¹æ€ä¹ˆè¿™ä¹ˆä¸æ‡‚äº‹ï¼ŒçœŸè®©äººå¤´ç–¼ï¼', 'å¤©å¿«é»‘äº†ï¼Œæˆ‘å¾—èµ¶ç´§å¸¦å¥¹å›å»ã€‚']
          };

          // Data for Slide 4: Solution FEAST Options
          const solutionOptions = {
            idiom: ['çµæœºä¸€åŠ¨', 'è®¡ä¸Šå¿ƒæ¥', 'çœ¼ç å­éª¨ç¢Œä¸€è½¬', 'çªç„¶æƒ³åˆ°äº†ä¸€ä¸ªå¥½åŠæ³•'],
            action: ['è¹²ä¸‹èº«å­', 'å‡‘åˆ°å¦¹å¦¹è€³è¾¹', 'æ‹‰ç€å¦¹å¦¹çš„å°æ‰‹', 'æ¸©æŸ”åœ°æ‘¸æ‘¸å¦¹å¦¹çš„å¤´'],
            speech: [
              'å¦ˆå¦ˆç”Ÿç—…äº†ï¼Œæˆ‘ä»¬å›å»åšå¥¹çš„â€œå°æŠ¤å£«â€å¥½ä¸å¥½ï¼Ÿ', 
              'å¦ˆå¦ˆä¸€ä¸ªäººåœ¨å®¶æ²¡äººç…§é¡¾ï¼Œæˆ‘ä»¬æ˜å¤©å†æ¥ç©ï¼Œå¥½å—ï¼Ÿ', 
              'å¤©å¿«é»‘äº†ï¼Œå¦ˆå¦ˆè¿˜åœ¨ç­‰æˆ‘ä»¬ä¹°è¯å›å»å‘¢ï¼Œä½ è¦åšä¸ªæ‡‚äº‹çš„å­©å­ã€‚', 
              'å¦‚æœä½ ç°åœ¨è·Ÿæˆ‘å›å®¶ç…§é¡¾å¦ˆå¦ˆï¼Œå¦ˆå¦ˆä¸€å®šä¼šå¤¸ä½ æ˜¯ä¹–å­©å­çš„ã€‚'
            ]
          };

          // Data for Slide 2: Expanded Vocab Bank with Flashcard Details
          const vocabCategories = [
            {
              title: "ğŸ”¥ æå†™å°æ˜çš„ç„¦æ€¥ (Anxiety)",
              color: "border-red-200",
              words: [
                { w: "å¿ƒæ€¥å¦‚ç„š", p: "xÄ«n jÃ­ rÃº fÃ©n", mean_cn: "å¿ƒé‡Œæ€¥å¾—åƒç«çƒ§ä¸€æ ·", mean_en: "Burning with anxiety", usage: "å¦ˆå¦ˆç”Ÿç—…æ— äººç…§é¡¾æ—¶", color: "border-red-200" },
                { w: "ç„¦æ€¥ä¸‡åˆ†", p: "jiÄo jÃ­ wÃ n fÄ“n", mean_cn: "éå¸¸ç€æ€¥", mean_en: "Extremely anxious", usage: "æ‰¾ä¸åˆ°å®¶äºº/æ—¶é—´æ¥ä¸åŠæ—¶", color: "border-red-200" },
                { w: "åç«‹ä¸å®‰", p: "zuÃ² lÃ¬ bÃ¹ Än", mean_cn: "åç€ç«™ç€éƒ½ä¸å®‰å®", mean_en: "Restless", usage: "ç­‰å¾…ç»“æœ/æ‹…å¿ƒäº‹æƒ…æ—¶", color: "border-red-200" },
                { w: "çƒ­é”…ä¸Šçš„èš‚èš", p: "rÃ¨ guÅ shÃ ng de mÇ yÇ", mean_cn: "å½¢å®¹å¿ƒé‡Œçƒ¦èºã€ç„¦æ€¥", mean_en: "Like ants on a hot pan", usage: "ä¸çŸ¥è¯¥æ€ä¹ˆåŠæ—¶", color: "border-red-200" }
              ]
            },
            {
              title: "ğŸ˜  æå†™ç¥æ€/åŠ¨ä½œ (Action)",
              color: "border-purple-200",
              words: [
                { w: "çœ‰å¤´ç´§é”", p: "mÃ©i tÃ³u jÇn suÇ’", mean_cn: "çš±ç€çœ‰å¤´ï¼Œå¾ˆä¸å¼€å¿ƒ", mean_en: "Frowning deeply", usage: "é‡åˆ°å›°éš¾æˆ–æ‹…å¿§æ—¶", color: "border-purple-200" },
                { w: "æ»¡å¤´å¤§æ±—", p: "mÇn tÃ³u dÃ  hÃ n", mean_cn: "æ€¥å¾—/ç´¯å¾—æµäº†å¾ˆå¤šæ±—", mean_en: "Profusely sweating", usage: "éå¸¸ç´§å¼ æˆ–åŠ³ç´¯æ—¶", color: "border-purple-200" },
                { w: "æ¥å›è¸±æ­¥", p: "lÃ¡i huÃ­ duÃ³ bÃ¹", mean_cn: "èµ°æ¥èµ°å»ï¼Œåœä¸ä¸‹æ¥", mean_en: "Pacing back and forth", usage: "æ€è€ƒé—®é¢˜æˆ–ç„¦è™‘ç­‰å¾…æ—¶", color: "border-purple-200" },
                { w: "æ— å¥ˆ", p: "wÃº nÃ i", mean_cn: "æ²¡æœ‰åŠæ³•", mean_en: "Helpless / No choice", usage: "å¯¹åˆ«äººçš„è¡Œä¸ºæ„Ÿåˆ°æ²¡åŠæ³•æ—¶", color: "border-purple-200" }
      ]
            },
            {
              title: "ğŸ’¡ æå†™æ€è€ƒ/åŠæ³• (Idea)",
              color: "border-yellow-200",
              words: [
                { w: "çµæœºä¸€åŠ¨", p: "lÃ­ng jÄ« yÃ­ dÃ²ng", mean_cn: "çªç„¶æƒ³åˆ°äº†å¥½ä¸»æ„", mean_en: "Sudden inspiration", usage: "é‡åˆ°éš¾é¢˜éœ€è¦è§£å†³æ—¶", color: "border-yellow-200" },
                { w: "è®¡ä¸Šå¿ƒæ¥", p: "jÃ¬ shÃ ng xÄ«n lÃ¡i", mean_cn: "å¿ƒé‡Œæƒ³å‡ºäº†è®¡ç­–", mean_en: "A plan comes to mind", usage: "æƒ³åŠæ³•è§£å†³é—®é¢˜æ—¶", color: "border-yellow-200" },
                { w: "çœ¼ç å­éª¨ç¢Œä¸€è½¬", p: "yÇn zhÅ« zi gÅ« lu yÃ­ zhuÃ n", mean_cn: "å½¢å®¹é¬¼ç‚¹å­å¤š", mean_en: "Rolling eyes (thinking)", usage: "è°ƒçš®åœ°æƒ³åŠæ³•æ—¶", color: "border-yellow-200" },
                { w: "å‡‘åˆ°è€³è¾¹", p: "cÃ²u dÃ o Ä›r biÄn", mean_cn: "é è¿‘è€³æœµè¯´è¯", mean_en: "Whisper in ear", usage: "è¯´æ‚„æ‚„è¯æˆ–ç§˜å¯†è®¡åˆ’æ—¶", color: "border-yellow-200" }
              ]
            },
            {
              title: "ğŸ˜„ æå†™å¼€å¿ƒ (Happy)",
              color: "border-green-200",
              words: [
                { w: "å…´é«˜é‡‡çƒˆ", p: "xÃ¬ng gÄo cÇi liÃ¨", mean_cn: "éå¸¸é«˜å…´", mean_en: "In high spirits", usage: "å»æ¸¸ä¹åœº/å¬åˆ°å¥½æ¶ˆæ¯æ—¶", color: "border-green-200" },
                { w: "ç©å¾—ä¸äº¦ä¹ä¹", p: "bÃ¹ yÃ¬ lÃ¨ hÅ«", mean_cn: "ç©å¾—éå¸¸å¼€å¿ƒï¼Œå¿˜äº†æ—¶é—´", mean_en: "Playing happily", usage: "æ²‰è¿·äºæ¸¸æˆ/æ´»åŠ¨æ—¶", color: "border-green-200" },
                { w: "æ‰‹èˆè¶³è¹ˆ", p: "shÇ’u wÇ” zÃº dÇo", mean_cn: "é«˜å…´å¾—åŠ¨æ‰‹è„šä¹±è·³", mean_en: "Dancing with joy", usage: "æåº¦å…´å¥‹/å¼€å¿ƒæ—¶", color: "border-green-200" }
              ]
            }
          ];

          const generatePlaygroundSentence = () => {
            if (!playgroundSelections.feeling) return;
            const sentence = `çœ‹ç€ç©å¾—ä¸äº¦ä¹ä¹çš„å¦¹å¦¹ï¼Œå°æ˜å´${playgroundSelections.feeling}ã€‚ä»–${playgroundSelections.expression}ï¼Œ${playgroundSelections.action}ï¼Œå¿ƒé‡Œæƒ³ï¼šâ€œ${playgroundSelections.thought}â€`;
            setGeneratedPlayground(sentence);
            triggerConfetti();
          };

          const generateSolutionSentence = () => {
            if (!solutionSelections.idiom) return;
            const sentence = `é¢å¯¹ä¸æƒ³å›å®¶çš„å¦¹å¦¹ï¼Œå°æ˜${solutionSelections.idiom}ã€‚ä»–${solutionSelections.action}ï¼Œè½»å£°å¯¹å¦¹å¦¹è¯´ï¼šâ€œ${solutionSelections.speech}â€ å¦¹å¦¹å¬äº†ï¼Œæ‡‚äº‹åœ°ç‚¹äº†ç‚¹å¤´ã€‚`;
            setGeneratedSolution(sentence);
            triggerConfetti();
          };

          const triggerConfetti = () => {
            setShowConfetti(true);
            setTimeout(() => setShowConfetti(false), 2000);
          };

          const slides = [
            { type: 'intro', title: 'çœ‹å›¾ä½œæ–‡å¤§æŒ‘æˆ˜ï¼šå¦ˆå¦ˆç”Ÿç—…çš„é‚£ä¸€å¤©', content: 'ç›®æ ‡ï¼šè¿ç”¨å¥½è¯å¥½å¥ï¼Œå†™å‡ºæ‡‚äº‹å’Œå­é¡ºï¼' },
            { type: 'vocab', title: 'è¯è¯­å¤§å®åº“ (Vocabulary Bank)' },
            { type: 'playground_feast', title: 'æŒ‘æˆ˜ä¸€ï¼šæå†™å°æ˜çš„â€œç„¦æ€¥â€ (å›¾å››ï¼šæ¸¸ä¹åœº)' },
            { type: 'solution_feast', title: 'æŒ‘æˆ˜äºŒï¼šå°æ˜æ–½å¦™è®¡ (å›¾äº”)' },
            { type: 'ending', title: 'ç»“å±€ï¼šæ¸©é¦¨çš„å®¶' }
          ];

          const nextSlide = () => { if (currentSlide < slides.length - 1) setCurrentSlide(currentSlide + 1); };
          const prevSlide = () => { if (currentSlide > 0) setCurrentSlide(currentSlide - 1); };

          return (
            <div className="min-h-screen bg-indigo-50 flex flex-col items-center p-4 font-sans text-gray-800 relative">
              {showConfetti && (
                <div className="absolute top-0 left-0 w-full h-full pointer-events-none z-50 flex justify-center pt-20">
                   <div className="animate-bounce text-6xl">ğŸ‰âœ¨ğŸŒŸ</div>
                </div>
              )}

              <div className="w-full max-w-5xl bg-white rounded-xl shadow-lg p-4 mb-6 flex justify-between items-center border-b-4 border-indigo-400">
                <h1 className="text-xl md:text-2xl font-bold text-indigo-600 flex items-center gap-2">
                  <BookOpen className="w-8 h-8" /> P5 é«˜çº§åæ–‡ï¼šFEAST å†™ä½œç¥å™¨
                </h1>
                <div className="text-gray-500 font-semibold">Step {currentSlide + 1} / {slides.length}</div>
              </div>

              <div className="w-full max-w-5xl flex-grow bg-white rounded-xl shadow-xl overflow-hidden flex flex-col min-h-[600px]">
                <div className="flex-grow p-6 md:p-8 overflow-y-auto">
                  
                  {/* Slide 1: Intro */}
                  {slides[currentSlide].type === 'intro' && (
                    <div className="h-full flex flex-col justify-center items-center text-center space-y-6">
                      <div className="w-32 h-32 bg-yellow-100 rounded-full flex items-center justify-center animate-bounce">
                        <Star className="w-16 h-16 text-yellow-500" />
                      </div>
                      <h2 className="text-4xl font-bold text-gray-800">{slides[currentSlide].title}</h2>
                      <p className="text-xl text-gray-600">{slides[currentSlide].content}</p>
                      <div className="flex gap-4">
                         <button onClick={nextSlide} className="mt-8 px-8 py-3 bg-indigo-500 text-white rounded-full text-lg font-bold hover:bg-indigo-600 transition shadow-md flex items-center gap-2">
                           å¼€å§‹åˆ›ä½œ <ArrowRight className="w-5 h-5"/>
                         </button>
                      </div>
                    </div>
                  )}

                   {/* Slide 2: Flashcard Vocab Bank */}
                   {slides[currentSlide].type === 'vocab' && (
                    <div>
                      <h2 className="text-3xl font-bold mb-2 text-center text-indigo-600 flex items-center justify-center gap-2">
                        <BookOpen className="w-8 h-8"/> è¯è¯­å¤§å®åº“ (Flashcards)
                      </h2>
                      <p className="text-center text-gray-500 mb-6">ç‚¹å‡»å¡ç‰‡ç¿»è½¬ï¼Œå¬å¬æ€ä¹ˆè¯»ï¼Œçœ‹çœ‹ä»€ä¹ˆæ„æ€ï¼</p>
                      
                      <div className="space-y-8">
                        {vocabCategories.map((cat, idx) => (
                          <div key={idx} className="bg-gray-50 p-4 rounded-xl border border-gray-200">
                            <h3 className="text-xl font-bold mb-4 text-gray-700 border-l-4 border-indigo-400 pl-3">{cat.title}</h3>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                              {cat.words.map((word, i) => (
                                <Flashcard key={i} wordData={word} />
                              ))}
                            </div>
                          </div>
                        ))}
                      </div>
                      <div className="mt-8 flex justify-center pb-4">
                         <button onClick={nextSlide} className="px-8 py-3 bg-indigo-600 text-white rounded-full font-bold hover:bg-indigo-700 transition shadow-lg flex items-center gap-2">
                           æˆ‘å­¦ä¼šäº†ï¼Œå»æŒ‘æˆ˜ï¼ <ArrowRight className="w-5 h-5"/>
                         </button>
                      </div>
                    </div>
                  )}

                  {/* Slide 3: Playground FEAST (Multi-Option) */}
                  {slides[currentSlide].type === 'playground_feast' && (
                    <div className="flex flex-col h-full">
                      <h2 className="text-3xl font-bold mb-2 text-center text-orange-600">æŒ‘æˆ˜ä¸€ï¼šæå†™å°æ˜çš„â€œç„¦æ€¥â€ (å›¾å››ï¼šæ¸¸ä¹åœº)</h2>
                      <p className="text-center text-gray-500 mb-6">ç‚¹å‡»ä¸‹æ–¹é€‰é¡¹ï¼Œç»„åˆå‡ºç²¾å½©çš„æ®µè½ï¼</p>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div className="space-y-4">
                          {/* Feeling */}
                          <div>
                            <h3 className="font-bold text-red-500 mb-2 flex items-center"><Heart className="w-4 h-4 mr-1"/> Feeling (æ„Ÿå—)</h3>
                            <div className="flex flex-wrap gap-2">
                              {playgroundOptions.feeling.map(opt => (
                                <button key={opt} onClick={() => setPlaygroundSelections({...playgroundSelections, feeling: opt})}
                                  className={`px-3 py-1 rounded-full text-sm border transition ${playgroundSelections.feeling === opt ? 'bg-red-500 text-white border-red-500' : 'bg-white text-gray-600 border-gray-200 hover:border-red-300'}`}>
                                  {opt}
                                </button>
                              ))}
                            </div>
                          </div>
                          {/* Expression */}
                          <div>
                            <h3 className="font-bold text-purple-500 mb-2 flex items-center"><Frown className="w-4 h-4 mr-1"/> Expression (è¡¨æƒ…)</h3>
                            <div className="flex flex-wrap gap-2">
                              {playgroundOptions.expression.map(opt => (
                                <button key={opt} onClick={() => setPlaygroundSelections({...playgroundSelections, expression: opt})}
                                  className={`px-3 py-1 rounded-full text-sm border transition ${playgroundSelections.expression === opt ? 'bg-purple-500 text-white border-purple-500' : 'bg-white text-gray-600 border-gray-200 hover:border-purple-300'}`}>
                                  {opt}
                                </button>
                              ))}
                            </div>
                          </div>
                          {/* Action */}
                          <div>
                            <h3 className="font-bold text-blue-500 mb-2 flex items-center"><Star className="w-4 h-4 mr-1"/> Action (åŠ¨ä½œ)</h3>
                            <div className="flex flex-wrap gap-2">
                              {playgroundOptions.action.map(opt => (
                                <button key={opt} onClick={() => setPlaygroundSelections({...playgroundSelections, action: opt})}
                                  className={`px-3 py-1 rounded-full text-sm border transition ${playgroundSelections.action === opt ? 'bg-blue-500 text-white border-blue-500' : 'bg-white text-gray-600 border-gray-200 hover:border-blue-300'}`}>
                                  {opt}
                                </button>
                              ))}
                            </div>
                          </div>
                          {/* Thought */}
                          <div>
                            <h3 className="font-bold text-green-500 mb-2 flex items-center"><Lightbulb className="w-4 h-4 mr-1"/> Thought (å¿ƒç†)</h3>
                            <div className="flex flex-wrap gap-2">
                              {playgroundOptions.thought.map(opt => (
                                <button key={opt} onClick={() => setPlaygroundSelections({...playgroundSelections, thought: opt})}
                                  className={`px-3 py-1 rounded-full text-sm border transition ${playgroundSelections.thought === opt ? 'bg-green-500 text-white border-green-500' : 'bg-white text-gray-600 border-gray-200 hover:border-green-300 text-left'}`}>
                                  {opt}
                                </button>
                              ))}
                            </div>
                          </div>
                        </div>

                        {/* Output Area */}
                        <div className="bg-orange-50 p-6 rounded-xl border-2 border-orange-200 flex flex-col justify-between">
                          <div>
                            <h3 className="text-lg font-bold text-orange-800 mb-4 border-b pb-2 border-orange-200">
                              ğŸ“ æˆ‘çš„ä½œæ–‡æ®µè½
                            </h3>
                            <div className="text-lg leading-loose text-gray-800 min-h-[150px]">
                               {generatedPlayground ? (
                                 <span>
                                   çœ‹ç€ç©å¾—ä¸äº¦ä¹ä¹çš„å¦¹å¦¹ï¼Œå°æ˜å´
                                   <span className="text-red-600 font-bold mx-1">{playgroundSelections.feeling || '...'}</span>ã€‚
                                   ä»–
                                   <span className="text-purple-600 font-bold mx-1">{playgroundSelections.expression || '...'}</span>ï¼Œ
                                   <span className="text-blue-600 font-bold mx-1">{playgroundSelections.action || '...'}</span>ï¼Œ
                                   å¿ƒé‡Œæƒ³ï¼šâ€œ
                                   <span className="text-green-600 font-bold mx-1">{playgroundSelections.thought || '...'}</span>â€
                                 </span>
                               ) : <span className="text-gray-400 italic">è¯·åœ¨å·¦ä¾§é€‰æ‹©è¯è¯­...</span>}
                            </div>
                          </div>
                          <div className="space-y-3 mt-4">
                            <button onClick={generatePlaygroundSentence} className="w-full bg-orange-500 text-white py-3 rounded-lg font-bold hover:bg-orange-600 transition shadow-lg">
                              âœ¨ ç»„åˆç”Ÿæˆ (Generate)
                            </button>
                            {generatedPlayground && (
                              <div className="bg-white p-2 rounded text-center text-orange-600 font-bold flex items-center justify-center gap-2 animate-pulse border border-orange-200">
                                <Award className="w-5 h-5"/> å¥½è¯å¥½å¥ x 4ï¼å¤ªæ£’äº†ï¼
                              </div>
                            )}
                          </div>
                        </div>
                      </div>
                    </div>
                  )}

                  {/* Slide 4: Solution FEAST (The "Idea" Moment) */}
                  {slides[currentSlide].type === 'solution_feast' && (
                    <div className="flex flex-col h-full">
                      <h2 className="text-3xl font-bold mb-2 text-center text-teal-600">æŒ‘æˆ˜äºŒï¼šå°æ˜æ–½å¦™è®¡ (å›¾äº”)</h2>
                      <div className="bg-teal-50 p-3 rounded text-center text-teal-800 mb-6 text-lg">
                        <Zap className="inline w-5 h-5 mr-1" />
                        å¦¹å¦¹è¯´ï¼šâ€œæˆ‘è¿˜è¦ç©ï¼â€ è¿™æ—¶ï¼Œå°æ˜è¦æ€ä¹ˆåšä¸€ä¸ª<b>æ‡‚äº‹</b>çš„å“¥å“¥ï¼Ÿ
                      </div>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div className="space-y-6">
                          {/* Idiom (The Idea) */}
                          <div>
                            <h3 className="font-bold text-pink-600 mb-2 text-lg">1. çµæ„Ÿæ—¶åˆ» (Idiom/Phrase)</h3>
                            <div className="grid grid-cols-2 gap-2">
                              {solutionOptions.idiom.map(opt => (
                                <button key={opt} onClick={() => setSolutionSelections({...solutionSelections, idiom: opt})}
                                  className={`px-3 py-2 rounded-lg text-sm border transition font-medium ${solutionSelections.idiom === opt ? 'bg-pink-500 text-white border-pink-500 shadow-md' : 'bg-white text-gray-600 border-gray-200 hover:border-pink-300'}`}>
                                  {opt}
                                </button>
                              ))}
                            </div>
                          </div>
                          {/* Action */}
                          <div>
                            <h3 className="font-bold text-blue-600 mb-2 text-lg">2. é…åˆåŠ¨ä½œ (Action)</h3>
                            <div className="grid grid-cols-2 gap-2">
                              {solutionOptions.action.map(opt => (
                                <button key={opt} onClick={() => setSolutionSelections({...solutionSelections, action: opt})}
                                  className={`px-3 py-2 rounded-lg text-sm border transition font-medium ${solutionSelections.action === opt ? 'bg-blue-500 text-white border-blue-500 shadow-md' : 'bg-white text-gray-600 border-gray-200 hover:border-blue-300'}`}>
                                  {opt}
                                </button>
                              ))}
                            </div>
                          </div>
                          {/* Speech (The Plan - Updated Values) */}
                          <div>
                            <h3 className="font-bold text-green-600 mb-2 text-lg flex items-center gap-2">
                              3. å¦™è®¡åŠè¯´ (Speech)
                              <span className="text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full font-normal">è¯šå® & æ‡‚äº‹</span>
                            </h3>
                            <div className="flex flex-col gap-2">
                              {solutionOptions.speech.map(opt => (
                                <button key={opt} onClick={() => setSolutionSelections({...solutionSelections, speech: opt})}
                                  className={`px-3 py-2 rounded-lg text-sm border text-left transition ${solutionSelections.speech === opt ? 'bg-green-500 text-white border-green-500 shadow-md' : 'bg-white text-gray-600 border-gray-200 hover:border-green-300'}`}>
                                  {opt}
                                </button>
                              ))}
                            </div>
                          </div>
                        </div>

                        {/* Solution Output Area */}
                        <div className="bg-teal-50 p-6 rounded-xl border-2 border-teal-200 flex flex-col justify-between">
                          <div>
                            <h3 className="text-lg font-bold text-teal-800 mb-4 border-b pb-2 border-teal-200 flex items-center">
                              <Lightbulb className="w-5 h-5 mr-2" /> å¦™è®¡æ®µè½
                            </h3>
                            <div className="text-lg leading-loose text-gray-800 min-h-[150px]">
                               {generatedSolution ? (
                                 <span>
                                   é¢å¯¹ä¸æƒ³å›å®¶çš„å¦¹å¦¹ï¼Œå°æ˜
                                   <span className="text-pink-600 font-bold mx-1">{solutionSelections.idiom || '...'}</span>ã€‚
                                   ä»–
                                   <span className="text-blue-600 font-bold mx-1">{solutionSelections.action || '...'}</span>ï¼Œ
                                   è½»å£°å¯¹å¦¹å¦¹è¯´ï¼šâ€œ
                                   <span className="text-green-600 font-bold mx-1">{solutionSelections.speech || '...'}</span>â€
                                   å¦¹å¦¹å¬äº†ï¼Œæ‡‚äº‹åœ°ç‚¹äº†ç‚¹å¤´ã€‚
                                 </span>
                               ) : <span className="text-gray-400 italic">è¯·åœ¨å·¦ä¾§é€‰æ‹©ï¼šçµæ„Ÿè¯ + åŠ¨ä½œ + å¦™è®¡...</span>}
                            </div>
                          </div>
                          
                          <div className="space-y-3 mt-4">
                            <button onClick={generateSolutionSentence} className="w-full bg-teal-500 text-white py-3 rounded-lg font-bold hover:bg-teal-600 transition shadow-lg transform hover:-translate-y-1">
                              âœ¨ æ–½å±•å¦™è®¡ (Generate) âœ¨
                            </button>
                            {generatedSolution && (
                              <div className="flex gap-2">
                                <button onClick={() => speak(generatedSolution)} className="flex-1 bg-white border-2 border-teal-500 text-teal-600 py-2 rounded-lg font-bold flex items-center justify-center gap-2 hover:bg-teal-50 transition">
                                   <Volume2 className="w-5 h-5"/> å¤§å£°æœ—è¯»
                                </button>
                                <button className="flex-1 bg-white border-2 border-pink-400 text-pink-500 py-2 rounded-lg font-bold flex items-center justify-center gap-2 hover:bg-pink-50 transition">
                                   <Sparkles className="w-5 h-5"/> è¡¨æ¼”å‡ºæ¥
                                </button>
                              </div>
                            )}
                          </div>
                        </div>
                      </div>
                    </div>
                  )}

                  {/* Slide 5: Ending */}
                  {slides[currentSlide].type === 'ending' && (
                    <div className="h-full flex flex-col items-center justify-center text-center">
                      <CheckCircle className="w-24 h-24 text-green-500 mb-6" />
                      <h2 className="text-3xl font-bold mb-4">æŒ‘æˆ˜æˆåŠŸï¼</h2>
                      <div className="bg-yellow-50 p-6 rounded-xl border border-yellow-200 max-w-lg mb-8">
                        <h3 className="text-xl font-bold text-yellow-800 mb-2">è€å¸ˆçš„ç‚¹è¯„ï¼š</h3>
                        <p className="text-gray-700">
                          ä½ ä»Šå¤©å­¦ä¼šäº†ç”¨å¯¹æ¯”æ‰‹æ³•å†™â€œç„¦æ€¥â€ï¼Œä¹Ÿå­¦ä¼šäº†ç”¨â€œæ‡‚äº‹â€çš„è¯è¯­æ¥è§£å†³é—®é¢˜ã€‚
                          <br/>è®°å¾—ï¼Œä¸€ç¯‡å¥½ä½œæ–‡ï¼Œä¸ä»…è¦æœ‰<b>å¥½è¯å¥½å¥</b>ï¼Œæ›´è¦æœ‰<b>å¥½å¿ƒè‚ </b>ï¼
                        </p>
                      </div>
                      <button onClick={() => setCurrentSlide(0)} className="text-indigo-500 hover:underline flex items-center gap-2 font-bold">
                         å†ç©ä¸€æ¬¡ <ArrowRight className="w-4 h-4"/>
                      </button>
                    </div>
                  )}

                </div>

                {/* Navigation */}
                <div className="bg-gray-50 p-4 border-t border-gray-200 flex justify-between items-center">
                  <button onClick={prevSlide} disabled={currentSlide === 0} className={`flex items-center gap-2 px-6 py-2 rounded-lg font-bold transition ${currentSlide === 0 ? 'bg-gray-200 text-gray-400' : 'bg-white hover:bg-gray-100 text-gray-700'}`}>
                    <ArrowLeft className="w-5 h-5" /> ä¸Šä¸€é¡µ
                  </button>
                  <div className="flex gap-2">
                    {slides.map((_, idx) => (
                      <div key={idx} className={`w-3 h-3 rounded-full transition-all duration-300 ${currentSlide === idx ? 'bg-indigo-500 w-6' : 'bg-gray-300'}`} />
                    ))}
                  </div>
                  <button onClick={nextSlide} disabled={currentSlide === slides.length - 1} className={`flex items-center gap-2 px-6 py-2 rounded-lg font-bold transition ${currentSlide === slides.length - 1 ? 'bg-gray-200 text-gray-400' : 'bg-indigo-600 hover:bg-indigo-700 text-white shadow-md'}`}>
                    ä¸‹ä¸€é¡µ <ArrowRight className="w-5 h-5" />
                  </button>
                </div>
              </div>
            </div>
          );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>